{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '41985459-07284690ed1bbc3dd300f203e';\n\nconst formEl = document.querySelector('.form');\nconst galleryEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\n\nloaderEl.style.display = 'none';\n\nfunction fetchImage(imageName) {\n  return fetch(\n    `${BASE_URL}?key=${API_KEY}&q=${imageName}&image_type=photo&orientation=horizontal&safesearch=true`\n  ).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n}\n\nformEl.addEventListener('submit', handleSearch);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n  loaderEl.style.display = 'block';\n  const form = event.currentTarget;\n  const query = form.elements.query.value;\n  if (!query) {\n    onFetchError();\n    return;\n  }\n\n  fetchImage(query)\n    .then(data => {\n      loaderEl.style.display = 'none';\n      if (!data.hits.length) {\n        onFetchError();\n      }\n      galleryEl.innerHTML = createMarkup(data.hits);\n      const refreshGallery = new SimpleLightbox('.gallery-item a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      refreshGallery.refresh();\n    })\n    .catch(onFetchError)\n    .finally(() => {\n      loaderEl.style.display = 'none';\n      form.reset();\n    });\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      data-source=\"${largeImageURL}\"\n      alt=\"${tags}\"\n    />\n    <p class= \"gallery-text\">• Likes: ${likes} • Views: ${views} • Comments: ${comments} •</span> Downloads:${downloads}</p>\n  </a>\n</li>`\n    )\n    .join('');\n}\n\nfunction onFetchError(error) {\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n    messageColor: '#fff',\n    messageSize: '20px',\n    backgroundColor: '#EF4040',\n    close: false,\n    closeOnClick: true,\n    progressBarEasing: 'linear',\n  });\n}\n"],"names":["BASE_URL","API_KEY","formEl","galleryEl","loaderEl","fetchImage","imageName","resp","handleSearch","event","form","query","onFetchError","data","createMarkup","SimpleLightbox","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","error","iziToast"],"mappings":"6vBAMA,MAAMA,EAAW,2BACXC,EAAU,qCAEVC,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAW,SAAS,cAAc,SAAS,EAEjDA,EAAS,MAAM,QAAU,OAEzB,SAASC,EAAWC,EAAW,CAC7B,OAAO,MACL,GAAGN,SAAgBC,OAAaK,2DACpC,EAAI,KAAKC,GAAQ,CACb,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEjC,OAAOA,EAAK,MAChB,CAAG,CACH,CAEAL,EAAO,iBAAiB,SAAUM,CAAY,EAE9C,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBL,EAAS,MAAM,QAAU,QACzB,MAAMM,EAAOD,EAAM,cACbE,EAAQD,EAAK,SAAS,MAAM,MAClC,GAAI,CAACC,EAAO,CACVC,IACA,MACD,CAEDP,EAAWM,CAAK,EACb,KAAKE,GAAQ,CACZT,EAAS,MAAM,QAAU,OACpBS,EAAK,KAAK,QACbD,IAEFT,EAAU,UAAYW,EAAaD,EAAK,IAAI,EACrB,IAAIE,EAAe,kBAAmB,CAC3D,aAAc,MACd,aAAc,GACtB,CAAO,EACc,QAAO,CAC5B,CAAK,EACA,MAAMH,CAAY,EAClB,QAAQ,IAAM,CACbR,EAAS,MAAM,QAAU,OACzBM,EAAK,MAAK,CAChB,CAAK,CACL,CAEA,SAASI,EAAaE,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,kCAEsBL;AAAA;AAAA;AAAA,aAGrBD;AAAA,qBACQC;AAAA,aACRC;AAAA;AAAA,wCAE2BC,cAAkBC,iBAAqBC,wBAA+BC;AAAA;AAAA,MAGzG,EACA,KAAK,EAAE,CACZ,CAEA,SAASX,EAAaY,EAAO,CAC3BC,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,WACV,aAAc,OACd,YAAa,OACb,gBAAiB,UACjB,MAAO,GACP,aAAc,GACd,kBAAmB,QACvB,CAAG,CACH"}